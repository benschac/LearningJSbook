// standard AJAX xhr function
function getHTTPObject(){var e=new XMLHttpRequest;return e}function ajaxCall(e,t,n){var r=getHTTPObject();t.innerHTML="Finding Email";r.onreadystatechange=function(){if(r.readyState===4&&r.status===200){var e=JSON.parse(r.responseText);typeof n=="function"&&n(e)}};r.open("GET",e,!0);r.send(null)}(function(){var e=document.getElementById("search-form"),t=document.getElementById("q"),n=document.getElementById("get-all"),r=document.getElementById("output"),i={search:function(e){var n=document.getElementById("output");ajaxCall("data/contacts.json",n,function(n){var i=t.value,s=n.addressBook,o=s.length,u;e.preventDefault();r.innerHTML="";if(o>0&&i!=="")for(u=0;u<o;u++){var a=s[u],f=a.name.indexOf(i);f!==-1&&(r.innerHTML+="<p>"+a.name+', <a href="mailto:'+a.email+'">'+a.email+"</a></p>")}})},getAllContacts:function(){var e=document.getElementById("output");ajaxCall("data/contacts.json",e,function(e){var t=e.addressBook,n=t.length,i;r.innerHTML="";if(n>0)for(i=0;i<n;i++){var s=t[i];r.innerHTML+="<p>"+s.name+', <a href="mailto:'+s.email+'">'+s.email+"</a></p>"}})},setActiveSection:function(){this.parentNode.setAttribute("class","active")},removeActiveSection:function(){e.setAttribute("class","hovering")},addHoverClass:function(){e.setAttribute("class","hovering")},removeHoverClass:function(){e.removeAttribute("class")}};t.addEventListener("keyup",i.search,!1);t.addEventListener("focus",i.setActiveSection,!1);t.addEventListener("blur",i.removeActiveSection,!1);n.addEventListener("click",i.getAllContacts,!1);e.addEventListener("mouseover",i.addHoverClass,!1);e.addEventListener("mouseout",i.removeHoverClass,!1);e.addEventListener("submit",i.search,!1)})();